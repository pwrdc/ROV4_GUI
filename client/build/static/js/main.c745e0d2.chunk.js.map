{"version":3,"sources":["components/Header.js","components/Module.js","components/Camera.js","components/Terminal.js","index.js"],"names":["Header","className","React","Component","Module","this","props","io","emit","on","data","console","log","onClick","handleClick","title","content","Camera","state","img","style","zIndex","position","top","transform","textAlign","cursor","min","max","Math","floor","random","width","height","rgbdata","i","row","j","push","getRandomRGBValue","rgbarray","ctx","refs","canvas","getContext","length","fillStyle","fillRect","setInterval","renderRandomRGBImg","getRandomRGBImgArray","src","setState","alt","url","fetch","then","response","text","renderImg","prev_second","prev_second_i","second","Date","getSeconds","FRAME","animateRandomRGBImg","ref","Terminal","App","openSocket","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c745e0d2.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nexport default class Header extends React.Component {\r\n  render() {\r\n    return (\r\n      <header className=\"box Header\">\r\n        <h3 className=\"box__title Header__title\">GUI_ROV4</h3>\r\n      </header>\r\n    );\r\n  }\r\n}","import React from 'react';\r\n\r\nexport default class Module extends React.Component {\r\n  handleClick() {\r\n    this.props.io.emit('get_ahrs', 'dej mi te ahrsy')\r\n\r\n    this.props.io.on('ahrs', (data) => {\r\n      // render ahrs\r\n      console.log(data);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"box Module\" onClick={() => this.handleClick()}>\r\n        <h3 className=\"box__title Module__title\">{this.props.title}</h3>\r\n        <div className=\"Module__content\">{this.props.content}</div>\r\n      </div>\r\n    );\r\n  }\r\n}","import React from 'react';\r\n\r\nexport default class Camera extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      img:\r\n        <h2 style={{\r\n          zIndex: 1,\r\n          position: 'relative',\r\n          top: '50%',\r\n          transform: 'translateY(-50%)',\r\n          textAlign: 'center',\r\n          cursor: 'pointer'\r\n        }}>Kliknij tutaj aby połączyć z socketem</h2>\r\n    }\r\n  }\r\n\r\n  getRandomRGBValue(min=0, max=255) {\r\n    return Math.floor(Math.random() * max) + min;\r\n  }\r\n  getRandomRGBImgArray(width, height) {\r\n    let rgbdata = [];\r\n    for(let i = 0; i < width; i++){\r\n      let row = [];\r\n      for(let j = 0; j < height; j++){\r\n        row.push([\r\n          this.getRandomRGBValue(0,255),\r\n          this.getRandomRGBValue(0,255),\r\n          this.getRandomRGBValue(0,255)\r\n        ]);\r\n      }\r\n      rgbdata.push(row);\r\n    }\r\n    return rgbdata;\r\n  }\r\n  renderRandomRGBImg(rgbarray) {\r\n    // paint rgbadata array on a canvas\r\n    const canvas = this.refs.canvas;\r\n    let ctx = canvas.getContext('2d');\r\n    for(let i = 0; i < rgbarray.length; i++){\r\n      for(let j = 0; j < rgbarray[0].length; j++){\t\r\n        ctx.fillStyle = 'rgba('+\r\n          rgbarray[i][j][0]+','+\r\n          rgbarray[i][j][1]+','+\r\n          rgbarray[i][j][2]+', 1)'; \r\n        ctx.fillRect(i,j,1,1);\r\n      }\r\n    }\r\n  }\r\n\r\n  animateRandomRGBImg() {\r\n    setInterval(() => {\r\n      this.renderRandomRGBImg(\r\n        this.getRandomRGBImgArray(\r\n          this.refs.canvas.width,\r\n          this.refs.canvas.height\r\n        )\r\n      );\r\n    }, 500);\r\n  }\r\n\r\n  renderImg(data) {\r\n    let src = 'data:image/jpg;base64, '+data;\r\n    this.setState({\r\n      // set image state which will render it\r\n      img: <img src={src} alt=\"ROV camera output\"/>\r\n    });\r\n  }\r\n\r\n  fetchImgTxtBase64(url) {\r\n    fetch('b64.txt')\r\n    .then(response => response.text())\r\n    .then(data => {\r\n      this.renderImg(\r\n        data\r\n      );\r\n    });\r\n  }\r\n\r\n  handleClick() {\r\n    this.props.io.emit('get_frame', 'dej mi te klatki')\r\n  \r\n    let i = 0;\r\n    let prev_second = null;\r\n    let prev_second_i = null;\r\n    \r\n    this.props.io.on('frame', (data) => {\r\n      // calculate framerate \r\n      let date = new Date();\r\n      let second = date.getSeconds();\r\n      if(second !== prev_second) {\r\n        console.log('Framerate: '+(i-prev_second_i));\r\n        prev_second_i = i;\r\n      }\r\n      prev_second = second;\r\n\r\n      // render received frame\r\n      console.log('Frame received: '+i);\r\n      this.renderImg(\r\n        data.FRAME\r\n      );\r\n      i++\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    // generate random animation under the img\r\n    this.animateRandomRGBImg();\r\n\r\n    // fetch image converted to base64 from file\r\n    // this.fetchImgTxtBase64('b64.txt');\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Camera\" onClick={() => this.handleClick()}>\r\n        {this.state.img}\r\n        <canvas style={{cursor: 'pointer'}} ref=\"canvas\" width=\"4\" height=\"3\"></canvas>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nexport default class Terminal extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"box Terminal\">\r\n        <h3 className=\"box__title Terminal__title\">{this.props.title}</h3>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './style.scss';\r\n\r\nimport Header from './components/Header.js';\r\nimport Module from './components/Module.js';\r\nimport Camera from './components/Camera.js';\r\nimport Terminal from './components/Terminal.js';\r\n\r\nimport openSocket from 'socket.io-client';\r\n\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      io: openSocket('http://localhost:5000')\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.state.io.on('connect', () => {\r\n      console.log('Socket connected');\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"app\">\r\n        <Header />\r\n        <main>\r\n          <div className=\"modules\">\r\n            <Module title=\"Module 1\" content=\"sample content sample content\" io={this.state.io}/>\r\n            <Module title=\"Module 2\" content=\"sample content sample content\" io={this.state.io}/>\r\n            <Module title=\"Module 3\" content=\"sample content sample content\" io={this.state.io}/>\r\n            <Module title=\"Module 4\" content=\"sample content sample content\" io={this.state.io}/>\r\n          </div>\r\n          <Camera io={this.state.io}/>\r\n          <div className=\"modules\">\r\n            <Module title=\"Module 5\" content=\"sample content sample content\" io={this.state.io}/>\r\n            <Module title=\"Module 6\" content=\"sample content sample content\" io={this.state.io}/>\r\n            <Module title=\"Module 7\" content=\"sample content sample content\" io={this.state.io}/>\r\n          </div>\r\n        </main>\r\n        <div className=\"terminals\">\r\n          <Terminal title=\"Terminal 1\" />\r\n          <Terminal title=\"Terminal 2\" />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}